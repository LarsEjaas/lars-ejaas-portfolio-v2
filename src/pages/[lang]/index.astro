---
import HomeLayout from '@layouts/home/Home.astro';
import { getLangFromUrl } from '@i18n/utils';
import { languages } from '@i18n/languageDefinition.mts';
import {
  defaultLang,
  type DanishLanguageSlug,
  type Language,
} from '@i18n/settings';
import { getMetaForPage } from '@collections/meta';

type Props = Record<string, never>;

const lang = getLangFromUrl(Astro.url);
const meta = getMetaForPage('/', lang);

type TranslatedHomePath = { params: { lang: DanishLanguageSlug } };

export function getStaticPaths() {
  const SUPPORTED_LANGS = (Object.keys(languages) as Language[]).filter(
    (language) => language !== defaultLang
  );
  const paths = SUPPORTED_LANGS.reduce<TranslatedHomePath[]>((acc, lang) => {
    acc.push({
      params: { lang },
    });
    return acc;
  }, []);

  return paths;
}
---

<HomeLayout
  title={meta.title}
  lang={lang}
  inert={false}
  seo={{
    openGraph: {
      image: {
        name: meta.image.name,
        alt: meta.image.alt,
      },
    },
  }}
  description={meta.description}
/>
